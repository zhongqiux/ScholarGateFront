import{j as _,s as g,t as v,v as w,_ as y}from"./main-2c38814c.js";import{a as l}from"./element-plus-814f1687.js";import{ah as C,o as F,c as b,a as e,J as p,a3 as m,Q as n,ak as d,V as c,P as f,T as h,az as k,aA as B}from"./@vue-5e5b7d13.js";import"./vue-router-daaeaf7b.js";import"./@element-plus-901cfadf.js";import"./pinia-1cec025d.js";import"./axios-21b846bc.js";import"./identicon.js-56b04766.js";import"./blueimp-md5-3e7612d8.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";import"./lodash-es-21c98b27.js";import"./@vueuse-6c1c0c2c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";const P={data(){return{playFlip:!1,playFlip1:!1,username:"",pwd:"",nickname:"",email:"",password:"",confirmPassword:"",f_username:"",f_email:"",verificationCode:"",verificationCodeSent:!1,newPassword:"",confirmNewPassword:"",store:_()}},methods:{play(){this.playFlip=!this.playFlip,this.playFlip1=!this.playFlip1},APIlogin(){this.username===""||this.pwd===""?l({message:"账号和密码不能为空！",type:"error"}):g(this.username,this.pwd).then(s=>{s.flag==!0?(this.store.outdate=Date.now()+60*60*1e3,this.store.userId=s.data.userId,this.store.userName=s.data.userName,this.store.token=s.data.token,this.store.email=s.data.email,this.store.avatar=s.data.avatar,l({message:"登录成功！",type:"success"}),this.$router.push("/"),console.log(s)):(l({message:"登录失败！",type:"error"}),console.log(s))}).catch(s=>{console.log(s)})},APIregister(){if(this.password!==this.confirmPassword){l({message:"两次密码不一致！",type:"error"});return}else if(this.verificationCode===""){l({message:"验证码不能为空！",type:"error"});return}else v(this.nickname,this.password,this.email,this.verificationCode).then(s=>{s.flag==!0?(l({message:"注册成功！",type:"success"}),this.nickname="",this.password="",this.email="",this.verificationCode="",this.confirmPassword="",this.verificationCodeSent=!1,this.play()):l({message:"注册失败！",type:"error"})}).catch(s=>{console.log(s)})},sendVerificationCode(){console.log("发送邮箱验证码",this.email),w(this.email).then(s=>{s.flag==!0?(this.verificationCodeSent=!0,l({message:"验证码发送成功！",type:"success"})):(l({message:"验证码发送失败！",type:"error"}),console.log(s))}).catch(s=>{console.log(s)})}}};const r=s=>(k("data-v-541d2aae"),s=s(),B(),s),V=r(()=>e("div",{class:"background"},null,-1)),x={style:{opacity:"0.85",color:"black"}},A={class:"register-form",style:{"margin-top":"20vh"}},I=r(()=>e("h2",{class:"tit",style:{"font-weight":"bold",color:"black","font-size":"26px"}},"登录",-1)),S={class:"form-group"},D=r(()=>e("label",{for:"username"},"账号",-1)),N={class:"form-group"},U=r(()=>e("label",{for:"pwd"},"密码",-1)),E=r(()=>e("div",{class:"tit"},[e("button",{type:"submit"},"登录")],-1)),q={class:"tit",style:{"margin-top":"3vh"}},z={class:"register-form"},M=r(()=>e("h2",{class:"tit",style:{"font-weight":"bold",color:"black","font-size":"26px"}},"注册",-1)),T={class:"form-group"},L=r(()=>e("label",{for:"nickname"},"昵称",-1)),j={class:"form-group"},J=r(()=>e("label",{for:"email"},"邮箱",-1)),Q={class:"form-group"},G=r(()=>e("label",{for:"verificationCode"},"验证码",-1)),H=["disabled"],K={class:"form-group"},O=r(()=>e("label",{for:"password"},"密码",-1)),R={class:"form-group"},W=r(()=>e("label",{for:"confirmPassword"},"确认密码",-1)),X=r(()=>e("div",{class:"tit"},[e("button",{type:"submit"},"注册")],-1));function Y(s,o,Z,$,i,a){const u=C("el-button");return F(),b("div",null,[V,e("div",x,[e("div",{class:p([{"flip-front":i.playFlip},"flip-item flip-item-front"])},[e("div",A,[I,e("form",{onSubmit:o[2]||(o[2]=m((...t)=>a.APIlogin&&a.APIlogin(...t),["prevent"]))},[e("div",S,[D,n(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>i.username=t),type:"text",id:"username",placeholder:"请输入账号"},null,512),[[d,i.username]])]),e("div",N,[U,n(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>i.pwd=t),type:"pwd",id:"pwd",placeholder:"请输入密码"},null,512),[[d,i.pwd]])]),E,e("div",q,[c(u,{onClick:a.play},{default:f(()=>[h("没有账号？立即注册")]),_:1},8,["onClick"])])],32)])],2),e("div",{class:p([{"flip-back":i.playFlip1},"flip-item flip-item-back"])},[e("div",z,[M,e("form",{onSubmit:o[9]||(o[9]=m((...t)=>a.APIregister&&a.APIregister(...t),["prevent"]))},[e("div",T,[L,n(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>i.nickname=t),type:"text",id:"nickname",required:""},null,512),[[d,i.nickname]])]),e("div",j,[J,n(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>i.email=t),type:"email",id:"email",required:""},null,512),[[d,i.email]])]),e("div",Q,[G,n(e("input",{"onUpdate:modelValue":o[5]||(o[5]=t=>i.verificationCode=t),type:"text",id:"verificationCode",style:{width:"18.2vw"},required:""},null,512),[[d,i.verificationCode]]),e("button",{type:"button",onClick:o[6]||(o[6]=(...t)=>a.sendVerificationCode&&a.sendVerificationCode(...t)),disabled:i.verificationCodeSent,style:{"font-size":"16px",width:"6vw"}},"发送",8,H)]),e("div",K,[O,n(e("input",{"onUpdate:modelValue":o[7]||(o[7]=t=>i.password=t),type:"password",id:"password",required:""},null,512),[[d,i.password]])]),e("div",R,[W,n(e("input",{"onUpdate:modelValue":o[8]||(o[8]=t=>i.confirmPassword=t),type:"password",id:"confirmPassword",required:""},null,512),[[d,i.confirmPassword]])]),X,c(u,{onClick:a.play},{default:f(()=>[h("已有账号？前往登录")]),_:1},8,["onClick"])],32)])],2)])])}const Ce=y(P,[["render",Y],["__scopeId","data-v-541d2aae"]]);export{Ce as default};
