import{Y as K,Z as j,_ as J,$ as Y,k as Z,j as Q,a0 as X}from"./@element-plus-901cfadf.js";/* empty css                 */import{q as D,s as L,t as S,v as x,_ as R,o as P,w as tt,x as et}from"./main-051cdc8d.js";import{a as st,c as V}from"./element-plus-f98e4839.js";import{H as G,ah as p,o as a,c as n,a as e,V as g,O as A,P as y,T as m,J as $,S as u,F as f,az as W,aA as q,U as r,a8 as k,a3 as F}from"./@vue-5e5b7d13.js";const ot=G({name:"RightTab",components:{Edit:K,Histogram:j,Operation:J,Link:Y},props:["isPatent"],data(){return{viewNum:0,recommendNum:0,isCitation:!1,isFavourite:!1,isRecommend:!1,downloadLink:null,data:null,paperId:null,paperName:null,dialogVisible:!1,alignCenter:!0,showClose:!1}},methods:{toLogin(){D.push({path:"/login"})},clickAction(t){t==0||t==1&&(this.isFavourite||(this.isFavourite=!0,this.starSet()))},async patentDataGet(t){const s=await L(t);console.log(s),s.flag&&s.data.organic_results[0].pdf&&(this.downloadLink=s.data.organic_results[0].pdf)},async paperDataGet(t){const s=await S(t);if(console.log(s),s.flag){this.downloadLink=s.data.primary_location.pdf_url,this.paperName=s.data.title,this.isFavourite=s.data.star;var o=s.data.id,i=o.lastIndexOf("/");o=o.substring(i+1,o.length),this.paperId=o}},async starSet(){if(this.paperId!=null&&this.paperName!=null){const t=await x(this.paperId,this.paperName);console.log(t),t.flag?st({message:"收藏成功",type:"success",duration:1500}):this.dialogVisible=!0}},toDownload(){this.downloadLink!=null&&window.open(this.downloadLink,"_blank")}},mounted(){const t=this.$route.query.id;this.isPatent?this.patentDataGet(t):this.paperDataGet(t)}});const I=t=>(W("data-v-0cdfb8d4"),t=t(),q(),t),at={class:"item",style:{"margin-top":"13px"}},nt={class:"title"},it=I(()=>e("span",null,"资源下载",-1)),lt={class:"button"},ut={key:0,class:"item"},rt={class:"title"},dt=I(()=>e("span",null,"常用操作",-1)),ct=I(()=>e("span",null,"请先进行登录/注册",-1)),pt={class:"dialog-footer"};function ht(t,s,o,i,c,_){const B=p("Link"),C=p("el-button"),E=p("Operation"),b=p("el-dialog");return a(),n(f,null,[e("div",{class:$(["container",{container2:t.isPatent,container:!t.isPatent}])},[e("div",at,[e("div",nt,[g(B,{class:"icon"}),it]),e("div",lt,[t.downloadLink==null?(a(),A(C,{key:0,disabled:"true"},{default:y(()=>[m("暂无资源下载")]),_:1})):(a(),A(C,{key:1,onClick:t.toDownload},{default:y(()=>[m("资源下载")]),_:1},8,["onClick"]))])]),t.isPatent?u("",!0):(a(),n("div",ut,[e("div",rt,[g(E,{class:"icon"}),dt]),e("div",{class:"action_item",onClick:s[0]||(s[0]=w=>t.clickAction(1))},[e("i",{class:$(["iconfont icon-star",{clickedStyle:t.isFavourite}])},null,2),e("span",{class:$(["action_text",{clickedStyle:t.isFavourite}])},"收藏",2)])]))],2),g(b,{modelValue:t.dialogVisible,"onUpdate:modelValue":s[1]||(s[1]=w=>t.dialogVisible=w),title:"用户未登录",width:"30%",center:t.alignCenter,"align-center":t.alignCenter,"show-close":t.showClose,"close-on-click-modal":t.showClose,"close-on-press-escape":t.showClose},{footer:y(()=>[e("span",pt,[g(C,{type:"primary",onClick:t.toLogin},{default:y(()=>[m(" 登录/注册 ")]),_:1},8,["onClick"])])]),default:y(()=>[ct]),_:1},8,["modelValue","center","align-center","show-close","close-on-click-modal","close-on-press-escape"])],64)}const De=R(ot,[["render",ht],["__scopeId","data-v-0cdfb8d4"]]),_t=G({name:"Result",components:{ArrowDown:Z,ArrowUp:Q,Avatar:X},props:["isPatent"],data(){return{isExpand:!1,maxHeight:43,message:"",keyWords:[],recommendation:[],title:"",authorNames:[],assigneeNames:[],registerDate:"",registerNo:" CN202310829800.3",publicationDate:"",publicationNo:"",citationNum:"",IPCNo:[],longMsg:!1,dialogVisible:!1,alignCenter:!0,showClose:!1,concepts:[],conceptId:[],authorId:[]}},methods:{expandContent(t){console.log(t),t==1?this.isExpand=!this.isExpand:this.isExpand||(this.isExpand=!this.isExpand)},filter(t){return t?(t=t.toString(),t.length>300?(this.longMsg=!0,t.substring(0,300)+"..."):(this.longMsg=!1,t)):""},toKeyWord(t){D.push({path:"/explorePaper",query:{key:"works",value:t}})},toAuthor(t){this.isPatent||(console.log(this.authorId[t]),D.push({name:"researcher",params:{doi:this.authorId[t]}}))},toConcepts(t){console.log(t,this.conceptId),this.conceptId.length!=0&&D.push({path:"/field",query:{field:this.conceptId[t]}})},toLogin(){D.push({path:"/login"})},toResult(t){this.isPatent||D.push({path:"/result",query:{id:t}})},async patentDataGet(t){const s=V.service({lock:!0}),o=await L(t);if(console.log(o),o.flag){s.close(),this.title=o.data.organic_results[0].title,this.registerDate=o.data.organic_results[0].filing_date,this.publicationDate=o.data.organic_results[0].publication_date,this.publicationNo=o.data.organic_results[0].publication_number;var i;for(i=0;i<o.data.summary.assignee.length;i++)o.data.summary.assignee[i].key!="Total"&&this.assigneeNames.push(o.data.summary.assignee[i].key);for(i=0;i<o.data.summary.inventor.length;i++)o.data.summary.inventor[i].key!="Total"&&this.authorNames.push(o.data.summary.inventor[i].key);for(i=0;i<o.data.summary.cpc.length;i++)o.data.summary.cpc[i].key!="Total"&&this.IPCNo.push(o.data.summary.cpc[i].key);this.message=o.data.organic_results[0].snippet}else P().token=="undefined"&&alert("请登录")},async paperDataGet(t){const s=V.service({lock:!0}),o=await S(t);if(console.log(o),o.flag){s.close(),this.title=o.data.title,this.publicationDate=o.data.publication_date,this.citationNum=o.data.cited_by_count,this.message=tt(o.data.summary);for(var i=0;i<o.data.authorships.length;i++){this.authorNames.push(o.data.authorships[i].author.display_name);var c=o.data.authorships[i].author.id,_=c.lastIndexOf("/");c=c.substring(_+1,c.length),this.authorId.push(c)}for(var i=0;i<o.data.keywords.length;i++)this.keyWords.push(o.data.keywords[i].keyword);for(var i=0;i<o.data.concepts.length;i++){this.concepts.push(o.data.concepts[i].display_name);var c=o.data.concepts[i].id,_=c.lastIndexOf("/");c=c.substring(_+1,c.length),this.conceptId.push(c)}}else P().token=="undefined"&&(s.close(),this.dialogVisible=!0)},async relatedWorkGet(t){const s=await et(t);if(console.log(s),s.flag)for(var o=0;o<s.data.results.length;o++){var i=s.data.results[o].id,c=i.lastIndexOf("/");i=i.substring(c+1,i.length);let B=i,C=s.data.results[o].title,E=s.data.results[o].publication_date,b=[],w=[];for(var _=0;_<s.data.results[o].authorships.length;_++)b.push(s.data.results[o].authorships[_].author.display_name);for(var _=0;_<s.data.results[o].keywords.length;_++)w.push(s.data.results[o].keywords[_].keyword);this.recommendation.push({id:B,title:C,publishDate:E,author:b,keyword:w})}console.log(this.recommendation)}},mounted(){const t=this.$route.query.id;this.isPatent?this.patentDataGet(t):(this.paperDataGet(t),this.relatedWorkGet(t))},watch:{$route:function(){location.reload()}}});const d=t=>(W("data-v-f5962f9f"),t=t(),q(),t),mt={id:"info",class:"title"},gt={class:"title_name"},ft={key:0,class:"author_row"},yt=["onClick"],kt={key:1,class:"author_row"},vt=d(()=>e("span",{class:"text",style:{"font-weight":"bold",color:"#8590a6"}},"发明人:",-1)),Ct=["onClick"],wt={key:2,class:"row"},Ft=d(()=>e("span",{class:"text",style:{"font-weight":"bold",color:"#8590a6"}},"申请人:",-1)),bt=["onClick"],Dt={key:3,class:"row"},Bt=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"发表日期:",-1)),Et={class:"text"},At=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"引用次数:",-1)),Nt={class:"text"},$t={key:4,class:"row"},It=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"相关领域:",-1)),Pt=["onClick"],Vt={key:5,class:"row"},Lt=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"申请日:",-1)),St={class:"text"},Rt=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"公开日:",-1)),Gt={class:"text"},Wt=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"公开号:",-1)),qt={class:"text"},Ot=d(()=>e("span",{class:"text",style:{color:"#8590a6"}},"IPC分类号:",-1)),Tt={class:"ipc_text",key:"index"},Ut={class:"context"},Mt={class:"context_text"},zt={key:6,class:"tag_row"},Ht=d(()=>e("span",{class:"text"},"关键词：",-1)),Kt=d(()=>e("div",{id:"tag1"},null,-1)),jt={id:"recommend"},Jt=d(()=>e("div",{class:"page_divider"},[e("p",{class:"divider_title"},"相关推荐"),e("p",{class:"line"})],-1)),Yt={key:0},Zt={key:0,id:"tag4"},Qt={key:"index",class:"recommend_container"},Xt={class:"recommend_list"},xt={style:{color:"#2f3a91","font-size":"16px",width:"40px"}},te={class:"recommend_item"},ee=["onClick"],se={class:"recommend_info"},oe={class:"recommend_info"},ae=d(()=>e("span",{class:"recommend_info"},"作者：",-1)),ne={class:"recommend_info"},ie={class:"recommend_info"},le=d(()=>e("span",{class:"recommend_info"},"关键词：",-1)),ue={class:"recommend_info"},re={key:1},de={key:2,id:"tag2"},ce={key:0,id:"tag2"},pe=d(()=>e("div",{id:"comment",class:"page_divider"},[e("p",{class:"divider_title"},"交流评论"),e("p",{class:"line"})],-1)),he={id:"tag3"},_e={style:{border:"#8590a6 solid 1px",height:"300px",width:"100%"}},me={style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},ge=d(()=>e("p",{style:{"font-size":"16px",color:"#909399"}},"还没有评论，发表第一个评论吧",-1)),fe=d(()=>e("span",null,"请先进行登录/注册",-1)),ye={class:"dialog-footer"};function ke(t,s,o,i,c,_){const B=p("el-divider"),C=p("Avatar"),E=p("ArrowUp"),b=p("ArrowDown"),w=p("el-tag"),O=p("el-empty"),T=p("el-input"),U=p("ChatLineSquare"),M=p("el-icon"),z=p("el-button"),H=p("el-dialog");return a(),n(f,null,[e("div",null,[e("div",mt,[e("span",gt,r(t.title),1)]),g(B,{style:{"border-color":"#d5d8e9","border-width":"2px"}}),t.isPatent?u("",!0):(a(),n("div",ft,[g(C,{class:"icon"}),(a(!0),n(f,null,k(t.authorNames,(l,h)=>(a(),n("span",{class:"author_name",onClick:v=>t.toAuthor(h)},[m(r(l)+" ",1),h!=t.authorNames.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[0]||(s[0]=F(()=>{},["stop"]))},",")):u("",!0)],8,yt))),256))])),t.isPatent?(a(),n("div",kt,[vt,(a(!0),n(f,null,k(t.authorNames,(l,h)=>(a(),n("span",{class:"author_name2",onClick:v=>t.toAuthor(l)},[m(r(l)+" ",1),h!=t.authorNames.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[1]||(s[1]=F(()=>{},["stop"]))},",")):u("",!0)],8,Ct))),256))])):u("",!0),t.isPatent?(a(),n("div",wt,[Ft,(a(!0),n(f,null,k(t.assigneeNames,(l,h)=>(a(),n("span",{class:"author_name2",onClick:v=>t.toAuthor(l)},[m(r(l)+" ",1),h!=t.assigneeNames.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[2]||(s[2]=F(()=>{},["stop"]))},",")):u("",!0)],8,bt))),256))])):u("",!0),t.isPatent?u("",!0):(a(),n("div",Dt,[Bt,e("span",Et,r(t.publicationDate),1),At,e("span",Nt,r(t.citationNum),1)])),t.isPatent?u("",!0):(a(),n("div",$t,[It,(a(!0),n(f,null,k(t.concepts,(l,h)=>(a(),n("span",{class:"text2",key:"index",onClick:v=>t.toConcepts(h)},[m(r(l)+" ",1),h!=t.concepts.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[3]||(s[3]=F(()=>{},["stop"]))},",")):u("",!0)],8,Pt))),128))])),t.isPatent?(a(),n("div",Vt,[Lt,e("span",St,r(t.registerDate),1),Rt,e("span",Gt,r(t.publicationDate),1),Wt,e("span",qt,r(t.publicationNo),1),Ot,(a(!0),n(f,null,k(t.IPCNo,(l,h)=>(a(),n("span",Tt,[m(r(l)+" ",1),h!=t.IPCNo.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[4]||(s[4]=F(()=>{},["stop"]))},",")):u("",!0)]))),128))])):u("",!0),e("div",Ut,[e("div",Mt,[t.message?(a(),n("span",{key:0,onClick:s[5]||(s[5]=l=>t.expandContent(0))},r(t.isExpand?t.message:t.filter(t.message)),1)):u("",!0),t.longMsg?(a(),n("span",{key:1,onClick:s[6]||(s[6]=l=>t.expandContent(1)),class:"expand_button"},[m(r(t.isExpand?"收起":"阅读全部")+" ",1),t.isExpand?(a(),A(E,{key:0,class:"expand_icon"})):(a(),A(b,{key:1,class:"expand_icon"}))])):u("",!0)])]),!t.isPatent&&t.keyWords.length!=0?(a(),n("div",zt,[Ht,(a(!0),n(f,null,k(t.keyWords,l=>(a(),A(w,{class:"tags",effect:"plain",onClick:h=>t.toKeyWord(l)},{default:y(()=>[m(r(l),1)]),_:2},1032,["onClick"]))),256))])):u("",!0)]),Kt,e("div",jt,[Jt,t.recommendation.length!=0?(a(),n("div",Yt,[t.isPatent?u("",!0):(a(),n("div",Zt)),(a(!0),n(f,null,k(t.recommendation,(l,h)=>(a(),n("div",Qt,[e("div",Xt,[e("span",xt,r(h+1)+".",1),e("div",te,[e("p",{class:"recommend_title",onClick:v=>t.toResult(l.id)},r(l.title),9,ee),e("p",se,"发表日期："+r(l.publishDate),1),e("p",oe,[ae,(a(!0),n(f,null,k(l.author,(v,N)=>(a(),n("span",ne,[m(r(v)+" ",1),N!=l.author.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[7]||(s[7]=F(()=>{},["stop"]))},",")):u("",!0)]))),256))]),e("p",ie,[le,(a(!0),n(f,null,k(l.keyword,(v,N)=>(a(),n("span",ue,[m(r(v)+" ",1),N!=l.keyword.length-1?(a(),n("span",{key:0,style:{color:"#8590a6","font-weight":"normal"},onClick:s[8]||(s[8]=F(()=>{},["stop"]))},",")):u("",!0)]))),256))])])])]))),128))])):(a(),n("div",re,[g(O,{description:"无相关推荐"})])),t.isPatent?(a(),n("div",de)):u("",!0)]),t.isPatent?u("",!0):(a(),n("div",ce)),pe,e("div",he,[e("div",_e,[g(T,{disabled:"",placeholder:"评论功能暂缓开放，感谢您的支持",style:{width:"95%","margin-top":"20px","margin-bottom":"50px"}}),e("div",me,[g(M,{style:{color:"#909399","font-size":"100px"}},{default:y(()=>[g(U)]),_:1}),ge])])]),g(H,{modelValue:t.dialogVisible,"onUpdate:modelValue":s[9]||(s[9]=l=>t.dialogVisible=l),title:"用户未登录",width:"30%",center:t.alignCenter,"align-center":t.alignCenter,"show-close":t.showClose,"close-on-click-modal":t.showClose,"close-on-press-escape":t.showClose},{footer:y(()=>[e("span",ye,[g(z,{type:"primary",onClick:t.toLogin},{default:y(()=>[m(" 登录/注册 ")]),_:1},8,["onClick"])])]),default:y(()=>[fe]),_:1},8,["modelValue","center","align-center","show-close","close-on-click-modal","close-on-press-escape"])],64)}const Be=R(_t,[["render",ke],["__scopeId","data-v-f5962f9f"]]);export{Be as R,De as a};
