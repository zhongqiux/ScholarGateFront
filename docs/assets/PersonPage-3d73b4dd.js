import{A as x}from"./Avatar-26d34ee5.js";import{G as F,f as U,_ as v,h as A}from"./main-7a99c085.js";import{a as I}from"./element-plus-814f1687.js";import{e as G,_ as D,i as S,ah as l,o as y,c as b,a as r,V as e,U as N,P as s,K as E,F as B,T as h}from"./@vue-5e5b7d13.js";import"./vue-router-daaeaf7b.js";import"./@element-plus-901cfadf.js";import"./pinia-1cec025d.js";import"./axios-21b846bc.js";import"./identicon.js-56b04766.js";import"./blueimp-md5-3e7612d8.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";import"./lodash-es-21c98b27.js";import"./@vueuse-6c1c0c2c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";const P={components:{Avatar:x,GitAvatar:F},props:{avatar:Number,displayName:String,backGround:String,institutionDisplayName:String},setup(t){const o=G(!1),u="80px",n=G(0),a=D({displayName:"",institutionDisplayName:"",backGround:""}),i=D({...a});return S(()=>{console.log("displayName:",t.displayName),t.avatar!==void 0&&(n.value=t.avatar),t.displayName!==void 0?a.displayName=t.displayName:(a.displayName="default name",console.log("displayName:",t.displayName)),t.institutionDisplayName!==void 0?a.institutionDisplayName=t.institutionDisplayName:a.institutionDisplayName="default institution",t.backGround!==void 0?a.backGround=t.backGround:a.backGround="此用户还没有简介噢~",i.displayName=a.displayName,i.institutionDisplayName=a.institutionDisplayName,i.backGround=a.backGround}),{myavatar:n,dialogFormVisible:o,formLabelWidth:u,form:a,backgroundImagePath:"assets/Personbgc.jpg",handleConfirm:()=>{console.log(a.backGround),o.value=!1,a.backGround!=i.backGround&&(I({message:"提交修改请求成功，请耐心等待审核~",type:"success"}),U(a.backGround).then(d=>{console.log(d)}).catch(d=>{console.log(d)})),a.displayName=i.displayName,a.institutionDisplayName=i.institutionDisplayName,a.backGround=i.backGround},handleCancel:()=>{o.value=!1,a.displayName=i.displayName,a.institutionDisplayName=i.institutionDisplayName,a.backGround=i.backGround}}}};const K={class:"Info"},L={class:"left"},z={class:"info-container"},M={class:"name"},T={class:"organization"},W={class:"background"},j={class:"edit"},q={class:"dialog-footer"};function R(t,o,u,n,a,i){const c=l("GitAvatar"),m=l("el-text"),d=l("el-link"),p=l("StarFilled"),g=l("el-icon"),f=l("el-input"),k=l("el-form-item"),C=l("el-form"),w=l("el-button"),V=l("el-dialog");return y(),b(B,null,[r("div",{class:"background-container",style:E({backgroundImage:`url(${n.backgroundImagePath})`})},[r("div",K,[r("div",L,[e(c,{num:n.myavatar,class:"custom-avatar"},null,8,["num"]),r("div",z,[r("div",M,N(u.displayName),1),r("div",T,N(u.institutionDisplayName),1),r("div",W,[e(m,{class:"background-text"},{default:s(()=>[h(N(u.backGround),1)]),_:1})]),r("div",j,[e(d,{type:"success",underline:!1,onClick:o[0]||(o[0]=_=>n.dialogFormVisible=!0)},{default:s(()=>[h("编辑个人信息")]),_:1})])])]),e(g,{class:"is-loading",size:100},{default:s(()=>[e(p)]),_:1})])],4),e(V,{modelValue:n.dialogFormVisible,"onUpdate:modelValue":o[4]||(o[4]=_=>n.dialogFormVisible=_),title:"编辑个人信息","show-close":!1},{footer:s(()=>[r("span",q,[e(w,{onClick:n.handleCancel},{default:s(()=>[h("Cancel")]),_:1},8,["onClick"]),e(w,{type:"primary",onClick:n.handleConfirm},{default:s(()=>[h(" Confirm ")]),_:1},8,["onClick"])])]),default:s(()=>[e(C,{model:n.form,class:"form"},{default:s(()=>[e(k,{label:"昵称","label-width":n.formLabelWidth,class:"input"},{default:s(()=>[e(f,{modelValue:n.form.displayName,"onUpdate:modelValue":o[1]||(o[1]=_=>n.form.displayName=_),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),e(k,{label:"机构","label-width":n.formLabelWidth,class:"input"},{default:s(()=>[e(f,{modelValue:n.form.institutionDisplayName,"onUpdate:modelValue":o[2]||(o[2]=_=>n.form.institutionDisplayName=_),autocomplete:"off",disabled:""},null,8,["modelValue"])]),_:1},8,["label-width"]),e(k,{label:"个人简介","label-width":n.formLabelWidth,class:"input bgc-input"},{default:s(()=>[e(f,{modelValue:n.form.backGround,"onUpdate:modelValue":o[3]||(o[3]=_=>n.form.backGround=_),autocomplete:"off",rows:5,type:"textarea",maxlength:"100","show-word-limit":"",resize:"none"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const H=v(P,[["render",R],["__scopeId","data-v-80727433"]]),J={data(){return{searchKeyword:""}},methods:{handleSearch(){this.$emit("search",this.searchKeyword)}}};const O={class:"search-container"};function Q(t,o,u,n,a,i){const c=l("el-input"),m=l("Search");return y(),b("div",null,[r("div",O,[e(c,{modelValue:a.searchKeyword,"onUpdate:modelValue":o[0]||(o[0]=d=>a.searchKeyword=d),placeholder:"关键词检索",style:{width:"400px"}},null,8,["modelValue"]),r("div",{class:"search-icon",onClick:o[1]||(o[1]=(...d)=>i.handleSearch&&i.handleSearch(...d))},[e(m,{style:{width:"1em",height:"1em"}})])])])}const X=v(J,[["render",Q],["__scopeId","data-v-5d582a75"]]),Y={components:{KeywordSearch:X},props:{works:Array,stars:Array},data(){return{SearchKeyword:""}},methods:{handleClick(t){console.log("Item Clicked:",t.id);const o={path:"/result",query:{id:t.id}};this.$router.push(o)}}};const Z={class:"wrapper"},$={role:"tablist",class:"tabs tabs-lifted"};function aa(t,o,u,n,a,i){const c=l("el-table-column"),m=l("el-table"),d=l("el-tab-pane"),p=l("el-button"),g=l("el-tabs");return y(),b("div",Z,[r("div",$,[e(g,{type:"border-card",style:{width:"calc(60vw - 41px)",height:"60vh"}},{default:s(()=>[e(d,{label:"论文"},{default:s(()=>[e(m,{data:u.works,style:{width:"100%"},height:"53vh",class:"works"},{default:s(()=>[e(c,{prop:"workName",label:"workName",width:"'40vw'"}),e(c,{prop:"publicationDate",label:"publicationDate",width:"200"})]),_:1},8,["data"])]),_:1}),e(d,{label:"收藏"},{default:s(()=>[e(m,{data:u.stars,style:{width:"100%"},height:"53vh",class:"works"},{default:s(()=>[e(c,{prop:"name",label:"name",width:"'40vw'"}),e(c,{label:"操作",width:"200"},{default:s(f=>[e(p,{type:"primary",onClick:k=>i.handleClick(f.row)},{default:s(()=>[h("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})])])}const ea=v(Y,[["render",aa],["__scopeId","data-v-19442f0e"]]),ta={components:{UserProfile:ea,UserInfo:H},data(){return{avatar:0,displayName:"",backGround:"",institutionDisplayName:"",works:[],stars:[],isMounted:!1}},mounted(){this.getUserDataTest()},methods:{getUserDataTest(){A().then(t=>{console.log(t.data.backGround),this.avatar=parseInt(t.data.avatar,10),this.displayName=t.data.displayName,t.data.backGround==null||t.data.backGround==""?this.backGround="此用户还没有简介噢~":this.backGround=t.data.backGround,this.institutionDisplayName=t.data.institutionDisplayName,this.works=t.data.works,this.stars=t.data.stars,this.isMounted=!0}).catch(t=>{console.log(t)})}}};const oa={key:0},na={key:1};function la(t,o,u,n,a,i){const c=l("UserInfo"),m=l("UserProfile"),d=l("Loading"),p=l("el-icon");return a.isMounted?(y(),b("div",oa,[e(c,{avatar:a.avatar,displayName:a.displayName,backGround:a.backGround,institutionDisplayName:a.institutionDisplayName},null,8,["avatar","displayName","backGround","institutionDisplayName"]),e(m,{works:a.works,stars:a.stars},null,8,["works","stars"])])):(y(),b("div",na,[e(p,{class:"is-loading",size:300},{default:s(()=>[e(d)]),_:1})]))}const xa=v(ta,[["render",la],["__scopeId","data-v-86445076"]]);export{xa as default};
