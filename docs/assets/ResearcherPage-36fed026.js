import{A as w}from"./Avatar-0422d00c.js";import{n as D,o as V,_ as v,p as x}from"./main-051cdc8d.js";import{a as B}from"./element-plus-f98e4839.js";import{e as k,ah as t,o as p,c as f,a as c,U as y,V as o,P as n,O as A,S as C,F as I,T as h,az as R,aA as S}from"./@vue-5e5b7d13.js";import"./vue-router-daaeaf7b.js";import"./@element-plus-901cfadf.js";import"./pinia-1cec025d.js";import"./axios-21b846bc.js";import"./identicon.js-56b04766.js";import"./blueimp-md5-3e7612d8.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";import"./lodash-es-21c98b27.js";import"./@vueuse-6c1c0c2c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";const G={components:{Avatar:w},props:{displayName:String,backGround:String,institutionDisplayName:String,doi:String},setup(s){const e=k(!1),r="80px",a=k(!1);return{dialogVisible:e,formLabelWidth:r,isRealNameAuthenticated:a,handleConfirm:()=>{const _=s.doi;console.log(_),B({message:"提交认领请求成功，请耐心等待审核~",type:"success"}),D(_,V().email).then(i=>{console.log(i)}).catch(i=>{console.log(i)}),e.value=!1}}}};const T=s=>(R("data-v-0fd0dd62"),s=s(),S(),s),E={class:"header-container"},U={class:"left"},F={class:"info-container"},z={class:"name"},M={class:"organization"},$={class:"background"},L={class:"right"},P=T(()=>c("span",null,"确定认领此门户？",-1)),O={class:"dialog-footer"};function W(s,e,r,a,l,_){const i=t("el-text"),d=t("el-button"),u=t("el-divider"),m=t("Sunny"),g=t("el-icon"),N=t("el-dialog");return p(),f(I,null,[c("div",E,[c("div",U,[c("div",F,[c("div",z,y(r.displayName),1),c("div",M,y(r.institutionDisplayName),1),c("div",$,[o(i,{class:"background-text","line-clamp":"5"},{default:n(()=>[h(y(r.backGround),1)]),_:1})])])]),c("div",L,[a.isRealNameAuthenticated?C("",!0):(p(),A(d,{key:0,type:"primary",round:"",onClick:e[0]||(e[0]=b=>a.dialogVisible=!0)},{default:n(()=>[h("认领此门户")]),_:1})),o(u,{direction:"vertical","border-style":"dashed",class:"custom-divider"}),o(g,{class:"is-loading",size:220},{default:n(()=>[o(m)]),_:1})])]),o(N,{modelValue:a.dialogVisible,"onUpdate:modelValue":e[2]||(e[2]=b=>a.dialogVisible=b),title:"认领门户",width:"30%",class:"dialog"},{footer:n(()=>[c("span",O,[o(d,{onClick:e[1]||(e[1]=b=>a.dialogVisible=!1)},{default:n(()=>[h("Cancel")]),_:1}),o(d,{type:"primary",onClick:a.handleConfirm},{default:n(()=>[h(" Confirm ")]),_:1},8,["onClick"])])]),default:n(()=>[P]),_:1},8,["modelValue"])],64)}const j=v(G,[["render",W],["__scopeId","data-v-0fd0dd62"]]),q={props:{works:Array},setup(){return{currentTab:"论文"}}};const H={class:"bodydata"};function J(s,e,r,a,l,_){const i=t("el-table-column"),d=t("el-table"),u=t("el-tab-pane"),m=t("el-tabs");return p(),f("div",H,[o(m,{class:"demo-tabs",modelValue:a.currentTab,"onUpdate:modelValue":e[0]||(e[0]=g=>a.currentTab=g)},{default:n(()=>[o(u,{label:"论文",name:"论文"},{default:n(()=>[o(d,{data:r.works,style:{width:"100%"},height:"53vh",class:"works"},{default:n(()=>[o(i,{prop:"workName",label:"workName",width:"'40vw'"}),o(i,{prop:"publicationDate",label:"publicationDate",width:"200"})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])])}const K=v(q,[["render",J],["__scopeId","data-v-36e4def3"]]),Q={components:{ResearcherInfo:j,ResearcherData:K},data(){return{avatar:0,displayName:"",backGround:"",institutionDisplayName:"",works:[],isMounted:!1,doi:""}},mounted(){this.getUserDataTest()},methods:{getUserDataTest(){const s=this.$route.params.doi;console.log("DOI from route:",s),x().then(e=>{console.log(e.data),this.avatar=parseInt(e.data.avatar,10),this.displayName=e.data.displayName,this.backGround=e.data.backGround,this.institutionDisplayName=e.data.institutionDisplayName,this.works=e.data.works,this.doi=s,console.log(this.works[0].workName),this.isMounted=!0}).catch(e=>{console.log(e)})}}};const X={key:0},Y={key:1};function Z(s,e,r,a,l,_){const i=t("ResearcherInfo"),d=t("ResearcherData"),u=t("Loading"),m=t("el-icon");return l.isMounted?(p(),f("div",X,[o(i,{displayName:l.displayName,backGround:l.backGround,institutionDisplayName:l.institutionDisplayName,doi:l.doi},null,8,["displayName","backGround","institutionDisplayName","doi"]),o(d,{works:l.works},null,8,["works"])])):(p(),f("div",Y,[o(m,{class:"is-loading",size:300},{default:n(()=>[o(u)]),_:1})]))}const Ne=v(Q,[["render",Z],["__scopeId","data-v-ac7cb78e"]]);export{Ne as default};
