import{u as G,b as Q}from"./vue-router-daaeaf7b.js";/* empty css                 */import{o as J,p as me,q as he}from"./main-2c38814c.js";import{_ as U,e as r,i as ne,f as se,ah as n,o as l,c,F as x,a8 as A,V as t,P as o,a as e,T as V,U as f,O as F,u as O,S as y,J as oe}from"./@vue-5e5b7d13.js";import{c as H}from"./element-plus-814f1687.js";import"./@element-plus-901cfadf.js";import"./pinia-1cec025d.js";import"./axios-21b846bc.js";import"./identicon.js-56b04766.js";import"./blueimp-md5-3e7612d8.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";import"./lodash-es-21c98b27.js";import"./@vueuse-6c1c0c2c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";const ve=e("div",{class:"List__itemAction"},null,-1),be={class:"List__itemAction"},fe=e("div",{class:"iconfont icon-quote-left QuoteButton"},null,-1),ke={class:"CircleQuoteButton__label"},ge={class:"list-item"},ye=["onClick","innerHTML"],xe={class:"Author-info__content"},Ce={class:"keywords"},Ve=e("span",{class:"keywords__label"},"类型： ",-1),Se={class:"keywords__content"},Ae={class:"keywords"},we=e("span",{class:"keywords__label"},"发布时间： ",-1),$e={class:"keywords__content"},Te={class:"concepts"},Le=e("span",{class:"keywords__label"},"concepts: ",-1),Pe=["onClick"],Ie={class:"keywords"},Fe=e("span",{class:"keywords__label"},"关键词: ",-1),Ue=["innerHTML"],Re=e("span",null," ",-1),De={class:"downloadPdf"},Be={class:"paginationStyle"},Ne={__name:"SearchCard",props:[],setup(W,{expose:v}){const s=J(),L=U({}),S=G(),R=Q();U({data:{keys:[],values:[]}}),r(!0);const P=r(1);r();const k=()=>{S.query.key;let u=S.query.value,p=P.value;const h=U({name:u});h.has_fulltext=s.hasFullTextValue?"true":"false",s.dateValue!==void 0&&(h.start_date=s.dateValue[0],h.stop_date=s.dateValue[1]),s.sortFunc!==void 0&&(h.sort_func=s.sortFunc),s.typeValue!==""&&(h.type=s.typeValue),console.log(h),me(h,p).then(T=>{L.data=T.data,s.concepts=T.data[0].concepts}).catch(T=>{console.error(T)})},_=u=>{const p=u.substring(u.lastIndexOf("/")+1);R.push(`field?field=${p}`)},D=()=>{alert("搜索该作者相关文章")},w=()=>{alert("搜索该关键词相关文章")},C=u=>{const p=u.substring(u.lastIndexOf("/")+1);console.log(p)},m=u=>{u==null?alert("该论文没有PDF!"):window.open(u,"_blank")},$=u=>{u==null?alert("该论文没有lading paper!"):window.open(u,"_blank")},I=()=>{k()};return v({getSearchData:k}),ne(()=>{k()}),se(()=>S.params,(u,p)=>{k()},{immediate:!0}),(u,p)=>{const h=n("el-aside"),T=n("UserFilled"),g=n("el-icon"),N=n("el-button"),M=n("el-container"),E=n("el-divider"),K=n("el-pagination");return l(),c(x,null,[(l(!0),c(x,null,A(L.data,(d,i)=>(l(),c("div",null,[t(M,{class:"List__item"},{default:o(()=>[t(h,{width:"60px",class:"List__itemActions"},{default:o(()=>[ve,e("div",be,[fe,e("div",ke,[V(" 引用 "),e("span",null,f(d.cited_by_count),1)])])]),_:2},1024),e("div",ge,[e("h2",{class:"ContentItem__titleText",onClick:b=>_(d.id),innerHTML:d.display_name},null,8,ye),e("div",null,[t(g,{class:"author-icon"},{default:o(()=>[t(T)]),_:1}),e("span",{onClick:D},[(l(!0),c(x,null,A(d.authorships,(b,B)=>(l(),c("span",xe,f(b)+"   ",1))),256))])]),e("div",Ce,[Ve,e("span",Se,f(d.type),1)]),e("div",Ae,[we,e("span",$e,f(d.publication_date),1)]),e("div",Te,[Le,(l(!0),c(x,null,A(d.concepts,(b,B,j)=>(l(),c("span",{class:"keywords__content",onClick:X=>C(B)},f(b)+"   ",9,Pe))),256))]),e("div",Ie,[Fe,(l(!0),c(x,null,A(d.keywords,(b,B)=>(l(),c("span",{class:"keywords__content",onClick:w},[e("span",{innerHTML:b},null,8,Ue),Re]))),256))]),e("div",De,[t(N,{onClick:b=>m(d.pdf_url)},{default:o(()=>[V("下载PDF")]),_:2},1032,["onClick"]),t(N,{onClick:b=>$(d.landing_page_url)},{default:o(()=>[V("landingPage")]),_:2},1032,["onClick"])])])]),_:2},1024),t(E,{class:"item-divider"})]))),256)),e("div",Be,[t(K,{background:"",layout:"prev, pager, next",total:1e3,"current-page":P.value,"onUpdate:currentPage":p[0]||(p[0]=d=>P.value=d),onCurrentChange:I},null,8,["current-page"])])],64)}}};const Me={class:"List__itemAction"},Ye={class:"List__itemIndex"},ze=e("div",{class:"List__itemAction"},[e("div",{class:"iconfont icon-quote-left QuoteButton"})],-1),qe={class:"list-item"},Ee={class:"Author-info__content"},Ke={class:"article-source__content"},Oe={class:"article-brief__content"},He={class:"paginationStyle"},Ge={__name:"PatentSearchCard",setup(W,{expose:v}){const s=J(),L=G();Q();const S=()=>{L.query.key;const w=L.query.value,C=P.value.toString(),m={patent_name:w,page:C,num:"15"};console.log(s.dateValue),s.dateValue!==void 0&&s.dateValue!==""&&(m.filing_after=s.dateValue[0].replace(/-/g,""),m.filing_before=s.dateValue[1].replace(/-/g,"")),s.countryValue!==""&&(m.countries=s.countryValue),s.sortByTime!==void 0&&s.sortByTime!==""&&(m.sortByTime=s.sortByTime),s.patentStatus!==void 0&&s.patentStatus!==""&&(m.status=s.patentStatus?"GRANT":"APPLICATION"),s.patentTypeRatio!==void 0&&s.patentTypeRatio!==""&&(m.type=s.patentTypeRatio),console.log(m),he(m).then($=>{R.data=$.data.organic_results}).catch($=>{console.error($)})},R=U({});r(!0);const P=r(1),k=()=>{alert("跳转到该文章")},_=()=>{alert("搜索该作者相关文章")},D=()=>{S()};return v({getSearchData:S}),ne(()=>{S()}),se(()=>L.params,(w,C)=>{console.log("路由参数发生变化"),S()},{immediate:!0}),(w,C)=>{const m=n("el-aside"),$=n("UserFilled"),I=n("el-icon"),u=n("el-button"),p=n("el-container"),h=n("el-divider"),T=n("el-pagination");return l(),c(x,null,[(l(!0),c(x,null,A(R.data,(g,N)=>(l(),c("div",null,[t(p,{class:"List__item"},{default:o(()=>[t(m,{width:"60px",class:"List__itemActions"},{default:o(()=>[e("div",Me,[e("div",Ye,f(g.position)+".",1)]),ze]),_:2},1024),e("div",qe,[e("h2",{class:"ContentItem__titleText",onClick:k},f(g.title),1),e("div",null,[t(I,{class:"author-icon"},{default:o(()=>[t($)]),_:1}),e("span",{onClick:_},[e("span",Ee,f(g.inventor)+"   ",1)])]),e("div",Ke,[e("span",null,"申请时间："+f(g.filing_date),1)]),e("div",Oe,[e("span",null,"摘要："+f(g.snippet),1)]),e("div",null,[t(u,{onClick:M=>w.downLoadPdf(g.pdf)},{default:o(()=>[V("查看PDF")]),_:2},1032,["onClick"])])])]),_:2},1024),t(h,{class:"item-divider"})]))),256)),e("div",He,[t(T,{background:"",layout:"prev, pager, next",total:1e3,"current-page":P.value,"onUpdate:currentPage":C[0]||(C[0]=g=>P.value=g),onCurrentChange:D},null,8,["current-page"])])],64)}}};const Qe={class:"body"},Je=e("div",{class:"AppSearchAggregation__label"},"分类浏览",-1),We={class:"demo-collapse"},je={class:"AggregationListItem"},Xe={class:"AggregationListItemKey"},Ze={class:"AggregationListItemKey"},et={class:"AggregationListItem"},tt={class:"AggregationListItemKey"},lt={class:"AggregationListItem"},at={class:"AggregationListItemKey"},ot={class:"AggregationListItem"},nt={class:"AggregationListItemKey"},st={class:"card"},ct={class:"AppSearchTabs"},it={key:0,class:"base-switch__button"},dt=e("span",{class:"base-switch__label"},"可获取全文",-1),ut={key:1,class:"base-switch__button"},rt={key:0,class:"base-switch__label"},_t={key:1,class:"base-switch__label"},pt=e("div",{class:"AppSearchTabContent"},[e("div",{class:"AppSearchFilters"},[e("div",{class:"AppFilterMeta"}),e("div",{class:"AppFilterInput"}),e("div",{class:"AppFilterSelect"})])],-1),mt={class:"AppSearchRefineItems"},ht=e("div",{class:"AppSearchRefineLabel"},"筛选条件",-1),vt={class:"AppSearchRefineItem"},bt=e("span",{class:"AppSearchRefineItemText"},[e("span",{class:"Highlight"},"主题："),V(" 化学 ")],-1),ft=e("div",{class:"List"},null,-1),kt={key:0},gt={key:1},Et={__name:"SearchDetail",setup(W){const v=J();G(),Q(),U({});const s=r(null),L=r(null),S=r(["1","2","3","4"]),R=[{value:"display_name",label:"名称排序(升序)"},{value:"display_name:desc",label:"名称排序(降序)"},{value:"relevance_score:desc",label:"综合排序"},{value:"publication_date",label:"发布时间(升序)"},{value:"publication_date:desc",label:"发布时间(降序)"},{value:"cited_by_count",label:"引用次数(升序)"},{value:"cited_by_count:desc",label:"引用次数(降序)"}],P=[{value:"new",label:"从新到旧"},{value:"old",label:"从旧到新"}],k=U({item1:[{label:"article",checkbox:!1},{label:"book-chapter",checkbox:!1},{label:"book",checkbox:!1},{label:"dissertation",checkbox:!1},{label:"dataset",checkbox:!1},{label:"report",checkbox:!1},{label:"letter",checkbox:!1},{label:"standard",checkbox:!1},{label:"editorial",checkbox:!1},{label:"paratext",checkbox:!1},{label:"other",checkbox:!1}],item2:v.concepts,item3:[{label:"2023",checkbox:!1},{label:"2022",checkbox:!1},{label:"2021",checkbox:!1},{label:"2020",checkbox:!1}],item4:[{label:"US",checkbox:!1,name:"美国"},{label:"WO",checkbox:!1,name:"世界知识产权组织"},{label:"CN",checkbox:!1,name:"中国"},{label:"JP",checkbox:!1,name:"日本"},{label:"DE",checkbox:!1,name:"德国"},{label:"FR",checkbox:!1,name:"法国"},{label:"GB",checkbox:!1,name:"英国"},{label:"CA",checkbox:!1,name:"加拿大"},{label:"AU",checkbox:!1,name:"澳大利亚"},{label:"IN",checkbox:!1,name:"印度"}],item7:[{label:"YES",checkbox:!1,name:"yes"},{label:"NO",checkbox:!1,name:"no"}]});U({data:{keys:[],values:[]}});const _=r(1);r();const D=r(),w=r(!0),C=r(),m=r(),$=r(),I=r(),u=r(),p=r(),h=r(),T=()=>{_.value===1?(N(),v.hasFullTextValue=w,v.dateValue=C,v.typeValue=m,v.sortFunc=I,s.value.getSearchData()):(M(),v.dateValue=C,v.countryValue=$,v.sortByTime=u,v.patentStatus=p,v.patentTypeRatio=h,L.value.getSearchData())},g=d=>{_.value=d},N=()=>{let d="";for(let i of k.item1)i.checkbox&&(d+=i.label,d+="|");m.value=d},M=()=>{let d="";for(let i of k.item4)i.checkbox&&(d+=i.label,d+=",");$.value=d};r("");const E=()=>{alert("删除搜索项")};function K(){window.scrollTo({top:0,behavior:"smooth"})}return(d,i)=>{const b=n("el-collapse-item"),B=n("el-radio"),j=n("el-radio-group"),X=n("el-collapse"),Z=n("el-aside"),ee=n("el-button"),Y=n("el-col"),ce=n("el-date-picker"),te=n("el-option"),le=n("el-select"),ae=n("el-switch"),ie=n("el-row"),de=n("Close"),ue=n("el-icon"),re=n("el-main"),_e=n("el-container");return l(),c("div",Qe,[t(_e,{class:"ContentLayout"},{default:o(()=>[t(Z,{width:"150px",class:"AppSearchAggregation ContentLayout__sideColumn"},{default:o(()=>[Je,e("div",We,[t(X,{modelValue:S.value,"onUpdate:modelValue":i[2]||(i[2]=a=>S.value=a)},{default:o(()=>[_.value==1?(l(),F(b,{key:0,title:"论文类型",name:"1"},{default:o(()=>[e("div",null,[(l(!0),c(x,null,A(k.item1,(a,z)=>(l(),c("div",je,[e("span",Xe,[t(O(H),{modelValue:a.checkbox,"onUpdate:modelValue":q=>a.checkbox=q,label:"",size:"",class:"checkbox"},null,8,["modelValue","onUpdate:modelValue"]),V(" "+f(a.label),1)])]))),256))])]),_:1})):y("",!0),_.value==1?(l(),F(b,{key:1,title:"学科分类",name:"2"},{default:o(()=>[e("div",null,[(l(!0),c(x,null,A(k.item2,(a,z,q)=>(l(),c("div",{key:z,class:"AggregationListItem"},[e("span",Ze,[t(O(H),{modelValue:D.value,"onUpdate:modelValue":i[0]||(i[0]=pe=>D.value=pe),label:"",size:"",class:"checkbox"},null,8,["modelValue"]),V(" "+f(a),1)])]))),128))])]),_:1})):y("",!0),_.value==1?(l(),F(b,{key:2,title:"出版年",name:"3"},{default:o(()=>[e("div",null,[(l(!0),c(x,null,A(k.item3,(a,z)=>(l(),c("div",et,[e("span",tt,f(a.label),1)]))),256))])]),_:1})):y("",!0),_.value==2?(l(),F(b,{key:3,title:"国家",name:"4"},{default:o(()=>[e("div",null,[(l(!0),c(x,null,A(k.item4,(a,z)=>(l(),c("div",lt,[e("span",at,[t(O(H),{modelValue:a.checkbox,"onUpdate:modelValue":q=>a.checkbox=q,label:"",size:"",class:"checkbox"},null,8,["modelValue","onUpdate:modelValue"]),V(" "+f(a.name),1)])]))),256))])]),_:1})):y("",!0),_.value==2?(l(),F(b,{key:4,title:"专利类型",name:"5"},{default:o(()=>[e("div",null,[e("div",ot,[e("span",nt,[t(j,{modelValue:h.value,"onUpdate:modelValue":i[1]||(i[1]=a=>h.value=a),class:"ml-4"},{default:o(()=>[t(B,{label:"PATENT",size:"large"},{default:o(()=>[V("专利")]),_:1}),t(B,{label:"DESIGN",size:"large"},{default:o(()=>[V("设计")]),_:1})]),_:1},8,["modelValue"])])])])]),_:1})):y("",!0)]),_:1},8,["modelValue"])])]),_:1}),t(re,null,{default:o(()=>[e("div",st,[e("div",ct,[e("div",{class:oe(["AppSearchTab",{"is-active":_.value===1}]),onClick:i[3]||(i[3]=a=>g(1))},"论文",2),e("div",{class:oe(["AppSearchTab",{"is-active":_.value===2}]),onClick:i[4]||(i[4]=a=>g(2))},"专利",2)]),t(ie,{class:"AppSearchFilter"},{default:o(()=>[t(Y,{span:2},{default:o(()=>[t(ee,{onClick:T},{default:o(()=>[V("搜索")]),_:1})]),_:1}),t(Y,{span:12},{default:o(()=>[t(ce,{modelValue:C.value,"onUpdate:modelValue":i[5]||(i[5]=a=>C.value=a),type:"daterange","start-placeholder":"Start date","end-placeholder":"End date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(Y,{span:4},{default:o(()=>[_.value==1?(l(),F(le,{key:0,modelValue:I.value,"onUpdate:modelValue":i[6]||(i[6]=a=>I.value=a),placeholder:"排序方式",size:"default"},{default:o(()=>[(l(),c(x,null,A(R,a=>t(te,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):y("",!0),_.value==2?(l(),F(le,{key:1,modelValue:u.value,"onUpdate:modelValue":i[7]||(i[7]=a=>u.value=a),placeholder:"时间排序",size:"default"},{default:o(()=>[(l(),c(x,null,A(P,a=>t(te,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):y("",!0)]),_:1}),t(Y,{span:4},{default:o(()=>[_.value==1?(l(),c("span",it,[t(ae,{modelValue:w.value,"onUpdate:modelValue":i[8]||(i[8]=a=>w.value=a)},null,8,["modelValue"]),dt])):y("",!0),_.value==2?(l(),c("span",ut,[t(ae,{modelValue:p.value,"onUpdate:modelValue":i[9]||(i[9]=a=>p.value=a)},null,8,["modelValue"]),p.value?(l(),c("span",rt,"已授予")):y("",!0),p.value?y("",!0):(l(),c("span",_t,"申请中"))])):y("",!0)]),_:1})]),_:1}),pt,e("div",mt,[ht,e("span",vt,[bt,t(ue,{class:"delete",onClick:E},{default:o(()=>[t(de)]),_:1})])]),ft,_.value==1?(l(),c("div",kt,[t(Ne,{ref_key:"SearchCardRef",ref:s},null,512)])):y("",!0),_.value==2?(l(),c("div",gt,[t(Ge,{ref_key:"PantentCardRef",ref:L},null,512)])):y("",!0)])]),_:1}),t(Z,{width:"40px"},{default:o(()=>[t(ee,{onClick:K,class:"scroll-top-button"},{default:o(()=>[V(" 回到顶部 ")]),_:1})]),_:1})]),_:1})])}}};export{Et as default};
