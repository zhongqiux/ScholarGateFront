import{a as v}from"./axios-21b846bc.js";import{a as r}from"./element-plus-c741864c.js";import{H as k,ah as a,o as c,c as _,a as s,T as m,V as l,P as o,O as d,F as y,a8 as w,U as p,az as x,aA as C}from"./@vue-533c3f3e.js";import{_ as $}from"./main-fcd63044.js";import"./lodash-es-21c98b27.js";import"./@vueuse-c44d1aed.js";import"./@element-plus-7946a086.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./blueimp-md5-3e7612d8.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";import"./vue-router-f0ce08cc.js";import"./pinia-01a938bb.js";import"./identicon.js-56b04766.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";const B=k({name:"MessagePage",created(){},data(){return{message_list:[{author_name:"122342343",last_message:"内容",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"456",last_message:"内",last_sendtime:"12:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"4",last_message:"内容内容内容内容内容内容内容内容内容",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"122342343",last_message:"内容",last_sendtime:"14:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"456",last_message:"内容",last_sendtime:"15:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"456",last_message:"内容",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"122342343",last_message:"关键词",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"456",last_message:"关键词",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"456",last_message:"内容",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{author_name:"456",last_message:"关键词",last_sendtime:"11:40",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}],has_message:!0}},methods:{refreshList(){v.get("/api/message/get_list",{params:{token:"111"}}).then(e=>{let n=e.data.error_no;switch(n){case 1e3:this.message_list=e.data.messages,this.has_message=!0;break;case 1001:r.error("请求错误");break;case 1002:r.error("用户未登录");break;case 1003:r.error("无聊天记录"),this.has_message=!1;break;default:r.error("请求返回未知的错误码："+n)}}).catch(e=>{r.error(e),console.log(e)})},det(e){this.$router.push({path:"/messageDetail",query:{user_name:e.author_name}})}}});const F=e=>(x("data-v-779f487f"),e=e(),C(),e),A={class:"display center"},E={class:"title"},D=F(()=>s("span",{class:"w-10 inline-block"},null,-1)),I={class:"card-header"},M={style:{width:"55vw"}},S={class:"time"};function V(e,n,L,N,z,P){const i=a("el-button"),u=a("el-container"),h=a("el-avatar"),g=a("el-text"),b=a("el-card"),f=a("el-scrollbar");return c(),_("div",A,[s("div",null,[s("div",E,[m("消息中心 "),l(i,{onClick:n[0]||(n[0]=t=>e.refreshList()),style:{"margin-left":"55vw"}},{default:o(()=>[m("刷新")]),_:1}),D]),e.has_message?(c(),d(f,{key:1,style:{height:"68vh"}},{default:o(()=>[(c(!0),_(y,null,w(e.message_list,t=>(c(),_("div",{key:t.author_name},[l(b,{class:"box-card",shadow:"hover"},{default:o(()=>[s("div",I,[l(h,{src:t.src,size:80,style:{"margin-right":"2vw"}},null,8,["src"]),s("span",M,[s("div",S,p(t.author_name+" · "+t.last_sendtime),1),s("div",null,[l(i,{class:"mes",text:"",onClick:T=>e.det(t)},{default:o(()=>[l(g,{class:"info",style:{"text-align":"left"},truncated:""},{default:o(()=>[m(p(t.last_message),1)]),_:2},1024)]),_:2},1032,["onClick"])])])])]),_:2},1024)]))),128))]),_:1})):(c(),d(u,{key:0},{default:o(()=>[m("哎呀，聊天列表为空~")]),_:1}))])])}const ce=$(B,[["render",V],["__scopeId","data-v-779f487f"]]);export{ce as default};
