import{a1 as A}from"./@element-plus-901cfadf.js";import{w as C,x as P,_ as B}from"./main-2c38814c.js";import{L as $}from"./LeftTab-f06b9a01.js";import{i as L}from"./echarts-1d8277e2.js";import{H as D,ah as v,o as r,c,a as e,V as s,P as n,Q as y,W as w,F as _,U as l,T as F,a8 as m,az as I,aA as E}from"./@vue-5e5b7d13.js";import"./vue-router-daaeaf7b.js";import"./pinia-1cec025d.js";import"./axios-21b846bc.js";import"./identicon.js-56b04766.js";import"./blueimp-md5-3e7612d8.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";import"./element-plus-814f1687.js";import"./lodash-es-21c98b27.js";import"./@vueuse-6c1c0c2c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";import"./tslib-54e39b60.js";import"./zrender-643ffd0a.js";const U=D({name:"FieldPage",mounted:function(){this.init(this.$route.query.field)},components:{IconPicture:A,LeftTab:$},data(){return{loading:!0,works:[],currentPage:1,metadata:{}}},methods:{join(t){let a="";return t.forEach(h=>{a=a+h.author.display_name}),a},go(t,a){this.$router.push({path:t,query:a})},updateWork(t){this.loading=!0,C(this.metadata.works_api_url,t).then(a=>{this.works=a.data.results}),this.loading=!1},getLastUrl(t){return t.substring(t.lastIndexOf("/")+1)},graphic(){let t=L(this.$refs.gg),a=[],h=[],f=[];this.metadata.counts_by_year.reverse().forEach(u=>{a.push(u.year),h.push(u.works_count),f.push(u.cited_by_count)});let k={tooltip:{trigger:"axis",valueFormatter:u=>u+"个"},legend:{data:["works_count","citied_by_count"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:[{type:"value",name:"作品数量",splitNumber:5},{type:"value",name:"引用数量",splitNumber:5}],series:[{name:"works_count",type:"line",stack:"Total",data:h},{name:"citied_by_count",type:"line",stack:"Total",data:f,yAxisIndex:1}]};t.resize(),t.setOption(k),window.addEventListener("resize",function(){t.resize()})},init(t){this.loading=!0,P(t).then(a=>{this.metadata=a.data,this.works=a.data.works.results,this.loading=!1,this.metadata.works_count=a.data.works.meta.count,this.graphic()})}}});const i=t=>(I("data-v-0575fe56"),t=t(),E(),t),z=i(()=>e("div",{class:"nav flex items-center flex-col justify-start"},null,-1)),N={class:"con center"},S={class:"head"},T={class:"image-box"},V=["src"],W={class:"info"},j={class:"title"},O=i(()=>e("div",{class:"divide"},null,-1)),q={class:"intro"},G=i(()=>e("span",{class:"field-description"},"描述：",-1)),H={class:"index mr-1.5"},Q=i(()=>e("span",{class:"field-description"},"指数：",-1)),J={class:"cite"},K=i(()=>e("span",{class:"field-description"},"被引用次数：",-1)),M={class:"index mr-1.5"},R=i(()=>e("span",{class:"field-description"},"相关领域：",-1)),X=["onClick"],Y={class:"page_divider flex flex-row items-center mt-4"},Z=i(()=>e("p",{class:"divider_title"},"概念引用数",-1)),tt=i(()=>e("p",{class:"line"},null,-1)),et=[Z,tt],at={class:"graph",style:{height:"200px",width:"100%"}},st={ref:"gg",id:"gg",style:{height:"200px",width:"960px"}},it={class:"page_divider flex flex-row items-center mt-4"},ot=i(()=>e("p",{class:"divider_title"},"论文",-1)),nt=i(()=>e("p",{class:"line"},null,-1)),lt=[ot,nt],dt={class:"list"},rt={class:"layout"},ct={class:"paper flex flex-row align-top"},ut={class:"content"},pt=["onClick"],_t={class:"keys flex flex-wrap start-1 items-center"},ht=i(()=>e("span",{class:"key-label"},"关键词：",-1)),mt={class:"key mr-2"},gt=i(()=>e("span",{class:"key-label"},"作者：",-1)),ft={class:"author mr-2"},vt={class:"keys flex flex-wrap start-1 items-center"},yt=i(()=>e("span",{class:"key-label"},"发表日期：",-1)),wt={class:"mr-2"},Ft=i(()=>e("span",{class:"key-label"},"被引次数：",-1));function kt(t,a,h,f,k,u){const d=v("el-skeleton-item"),p=v("el-skeleton"),b=v("el-pagination");return r(),c(_,null,[z,e("div",N,[e("div",S,[e("div",T,[s(p,{animated:"",loading:t.loading},{default:n(()=>[e("img",{src:t.metadata.image_url,class:"image"},null,8,V)]),template:n(()=>[s(d,{variant:"image",style:{width:"100px",height:"140px","margin-top":"20px"}})]),_:1},8,["loading"])]),e("div",W,[s(p,{animated:"",loading:t.loading},{default:n(()=>[e("div",j,l(t.metadata.display_name),1)]),template:n(()=>[s(d,{variant:"text",style:{width:"100px",height:"30px",float:"left"}})]),_:1},8,["loading"]),O,e("div",null,[s(p,{animated:"",loading:t.loading},{default:n(()=>[e("span",q,[G,F(l(t.metadata.description),1)])]),template:n(()=>[s(d,{variant:"text",style:{width:"300px"}})]),_:1},8,["loading"])]),e("div",null,[s(p,{animated:"",loading:t.loading},{default:n(()=>[e("span",H,[Q,F(l(t.metadata.summary_stats.h_index),1)]),e("span",J,[K,F(l(t.metadata.cited_by_count),1)])]),template:n(()=>[s(d,{variant:"text",style:{width:"300px"}})]),_:1},8,["loading"])]),e("div",null,[s(p,{animated:"",loading:t.loading},{default:n(()=>[e("span",M,[R,(r(),c(_,null,m(3,o=>e("span",{class:"mr-2 relatedCon",onClick:x=>(t.go("/field",{field:t.getLastUrl(t.metadata.related_concepts[o].id)}),t.init(t.getLastUrl(t.metadata.related_concepts[o].id)))},l(t.metadata.related_concepts[o].display_name),9,X)),64))])]),template:n(()=>[s(d,{variant:"text",style:{width:"300px"}})]),_:1},8,["loading"])])])]),y(e("div",Y,et,512),[[w,!t.loading]]),e("div",at,[y(e("div",st,null,512),[[w,!t.loading]])]),y(e("div",it,lt,512),[[w,!t.loading]]),e("div",dt,[e("div",rt,[s(p,{rows:5,animated:"",style:{width:"100%"},loading:t.loading},{template:n(()=>[(r(),c(_,null,m([0,1,2,3],()=>e("div",null,[s(d,{variant:"text",style:{height:"25px"}}),s(d,{variant:"text",style:{width:"70%",height:"25px",float:"left"}}),s(d,{variant:"text",class:"mt-2",style:{width:"60%",float:"left"}}),s(d,{variant:"text",class:"mt-2 mb-3",style:{width:"60%",float:"left"}})])),64))]),default:n(()=>[(r(!0),c(_,null,m(t.works,(o,x)=>(r(),c("div",ct,[e("div",ut,[e("div",{onClick:g=>t.go("/result",{id:t.getLastUrl(o.id)}),class:"article-title"},l(t.currentPage*10+x-9+" 、"+o.display_name),9,pt),e("div",_t,[ht,(r(!0),c(_,null,m(o.keywords.slice(0,3),g=>(r(),c("span",mt,l(g.keyword),1))),256)),gt,(r(!0),c(_,null,m(o.authorships.slice(0,3),g=>(r(),c("span",ft,l(g.author.display_name),1))),256))]),e("div",vt,[yt,e("span",wt,l(o.publication_date),1),Ft,e("span",null,l(o.cited_by_count),1)])])]))),256))]),_:1},8,["loading"])]),s(b,{"hide-on-single-page":!0,total:t.metadata.works_count,"page-size":10,"current-page":t.currentPage,"onUpdate:currentPage":a[0]||(a[0]=o=>t.currentPage=o),onCurrentChange:a[1]||(a[1]=o=>t.updateWork(t.currentPage)),layout:"prev, pager, next",class:"pagina"},null,8,["total","current-page"])])])],64)}const Kt=B(U,[["render",kt],["__scopeId","data-v-0575fe56"]]);export{Kt as default};
