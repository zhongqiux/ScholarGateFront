import{u as Q,b as J}from"./vue-router-daaeaf7b.js";/* empty css                 */import{y as W,z as pe,A as he,B as me,C as ve}from"./main-20e961e1.js";import{_ as B,e as r,i as se,f as X,ah as n,o as l,c as s,F as L,a8 as D,V as t,P as c,a as e,T as I,U as V,S as g,O as E,u as ae,J as oe}from"./@vue-5e5b7d13.js";import{d as ne}from"./element-plus-f98e4839.js";import"./@element-plus-901cfadf.js";import"./pinia-1cec025d.js";import"./axios-21b846bc.js";import"./identicon.js-56b04766.js";import"./blueimp-md5-3e7612d8.js";/* empty css                    */import"./pinia-plugin-persistedstate-02097300.js";import"./lodash-es-21c98b27.js";import"./@vueuse-6c1c0c2c.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-5c8c3070.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-9c1ce378.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";const fe=e("div",{class:"List__itemAction"},null,-1),be={class:"List__itemAction"},ke=e("div",{class:"iconfont icon-quote-left QuoteButton"},null,-1),ye={class:"CircleQuoteButton__label"},ge={class:"list-item"},xe=["onClick","innerHTML"],Ce={class:"Author-info__content"},Ve={class:"keywords"},$e=e("span",{class:"keywords__label"},"类型： ",-1),Se={class:"keywords__content"},we={class:"keywords"},Ae=e("span",{class:"keywords__label"},"发布时间： ",-1),Te={class:"keywords__content"},Le={class:"concepts"},Pe=e("span",{class:"keywords__label"},"concepts: ",-1),Ie=["onClick"],Fe={class:"keywords"},De=e("span",{class:"keywords__label"},"关键词: ",-1),Ue=["onClick"],Re=["innerHTML"],Be=e("span",null," ",-1),Ne={class:"downloadPdf"},Me={key:0},Ye={class:"paginationStyle"},ze={__name:"SearchCard",props:[],setup(Z,{expose:x}){const o=W(),F=Q(),N=J(),u=B({});B({data:{keys:[],values:[]}}),r(!0);const P=r(1);r();const b=r([]),S=()=>{let _=F.query.key,v=F.query.value,$=P.value;const p=B({name:v});if(p.has_fulltext=o.hasFullTextValue?"true":"false",o.dateValue!==void 0&&(p.start_date=o.dateValue[0],p.stop_date=o.dateValue[1]),o.sortFunc!==void 0&&(p.sort_func=o.sortFunc),o.typeValue!==""&&(p.type=o.typeValue),b.value.length!==0){const d=b.value.filter(h=>h.label==="concept").map(h=>h.id).join("|"),A=b.value.filter(h=>h.label==="key_word").map(h=>h.content).join("|");console.log(A),d!=""&&(p.concept=d),A!=""&&(p.key_word=A)}console.log(p),_==="works"?pe(p,$).then(d=>{u.data=d.data,o.concepts=d.data[0].concepts}).catch(d=>{console.error(d)}):_==="institutions"?he(v,$).then(d=>{u.data=d.data,o.concepts=d.data[0].concepts}).catch(d=>{console.error(d)}):_==="authors"&&me(v,$).then(d=>{u.data=d.data,o.concepts=d.data[0].concepts}).catch(d=>{console.error(d)})},M=_=>{const v=_.substring(_.lastIndexOf("/")+1);N.push(`result?id=${v}`)},U=()=>{alert("搜索该作者相关文章")},R=(_,v)=>{const $={label:"key_word",content:_,id:""};b.value.some(p=>p.content===$.content),b.value.push($),o.filterItems=b.value},k=(_,v,$)=>{const p={label:"concept",content:v,id:_};b.value.some(A=>A.id===p.id)||(b.value.push(p),o.filterItems=b.value)},C=_=>{_==null?alert("该论文没有PDF!"):window.open(_,"_blank")},m=_=>{_==null?alert("该论文没有lading paper!"):window.open(_,"_blank")},w=()=>{S()};return x({getSearchData:S}),se(()=>{S()}),X(()=>F.params,(_,v)=>{S()},{immediate:!0}),(_,v)=>{const $=n("el-aside"),p=n("UserFilled"),d=n("el-icon"),A=n("el-button"),h=n("el-container"),O=n("el-divider"),f=n("el-empty"),i=n("el-pagination");return l(),s(L,null,[(l(!0),s(L,null,D(u.data,(y,j)=>(l(),s("div",null,[t(h,{class:"List__item"},{default:c(()=>[t($,{width:"60px",class:"List__itemActions"},{default:c(()=>[fe,e("div",be,[ke,e("div",ye,[I(" 引用 "),e("span",null,V(y.cited_by_count),1)])])]),_:2},1024),e("div",ge,[e("h2",{class:"ContentItem__titleText",onClick:T=>M(y.id),innerHTML:y.display_name},null,8,xe),e("div",null,[t(d,{class:"author-icon"},{default:c(()=>[t(p)]),_:1}),e("span",{onClick:U},[(l(!0),s(L,null,D(y.authorships,(T,Y)=>(l(),s("span",Ce,V(T)+"   ",1))),256))])]),e("div",Ve,[$e,e("span",Se,V(y.type),1)]),e("div",we,[Ae,e("span",Te,V(y.publication_date),1)]),e("div",Le,[Pe,(l(!0),s(L,null,D(y.concepts,(T,Y,z)=>(l(),s("span",{class:"keywords__content",onClick:K=>k(Y,T,z)},V(T)+"   ",9,Ie))),256))]),e("div",Fe,[De,(l(!0),s(L,null,D(y.keywords,(T,Y)=>(l(),s("span",{class:"keywords__content",onClick:z=>R(T,Y)},[e("span",{innerHTML:T},null,8,Re),Be],8,Ue))),256))]),e("div",Ne,[t(A,{onClick:T=>C(y.pdf_url)},{default:c(()=>[I("下载PDF")]),_:2},1032,["onClick"]),t(A,{onClick:T=>m(y.landing_page_url)},{default:c(()=>[I("landingPage")]),_:2},1032,["onClick"])])])]),_:2},1024),t(O,{class:"item-divider"})]))),256)),u.data==""?(l(),s("div",Me,[t(f,{description:"无结果"})])):g("",!0),e("div",Ye,[t(i,{background:"",layout:"prev, pager, next",total:1e3,"current-page":P.value,"onUpdate:currentPage":v[0]||(v[0]=y=>P.value=y),onCurrentChange:w},null,8,["current-page"])])],64)}}};const Ee={class:"List__itemAction"},Oe={class:"List__itemIndex"},qe=e("div",{class:"List__itemAction"},[e("div",{class:"iconfont icon-quote-left QuoteButton"})],-1),He={class:"list-item"},je=["onClick"],Ke={class:"Author-info__content"},Ge={class:"article-source__content"},Qe={class:"article-brief__content"},Je={key:0},We={key:1,class:"paginationStyle"},Xe={__name:"PatentSearchCard",setup(Z,{expose:x}){const o=W(),F=Q(),N=J(),u=B({});r(!0);const P=r(1),b=r(0),S=()=>{F.query.key;const k=F.query.value,C=P.value.toString(),m={patent_name:k,page:C,num:"15"};o.dateValue!==void 0&&o.dateValue!==""&&(m.filing_after=o.dateValue[0].replace(/-/g,""),m.filing_before=o.dateValue[1].replace(/-/g,"")),o.countryValue!==""&&(m.countries=o.countryValue),o.sortByTime!==void 0&&o.sortByTime!==""&&(m.sortByTime=o.sortByTime),o.patentStatus!==void 0&&o.patentStatus!==""&&(m.status=o.patentStatus?"GRANT":"APPLICATION"),o.patentTypeRatio!==void 0&&o.patentTypeRatio!==""&&(m.type=o.patentTypeRatio),console.log(m),ve(m).then(w=>{u.data=w.data.organic_results,b.value=w.data.search_information.total_results}).catch(w=>{console.error(w)}),console.log(u)},M=k=>{const C=k.indexOf("/")+1,m=k.indexOf("/",C),w=k.substring(C,m);N.push(`patent?id=${w}`)},U=()=>{alert("搜索该作者相关文章")},R=()=>{S()};return x({getSearchData:S}),se(()=>{S()}),X(()=>F.params,(k,C)=>{console.log("路由参数发生变化"),S()},{immediate:!0}),(k,C)=>{const m=n("el-aside"),w=n("UserFilled"),_=n("el-icon"),v=n("el-button"),$=n("el-container"),p=n("el-divider"),d=n("el-empty"),A=n("el-pagination");return l(),s(L,null,[(l(!0),s(L,null,D(u.data,(h,O)=>(l(),s("div",null,[t($,{class:"List__item"},{default:c(()=>[t(m,{width:"60px",class:"List__itemActions"},{default:c(()=>[e("div",Ee,[e("div",Oe,V(h.position)+".",1)]),qe]),_:2},1024),e("div",He,[e("h2",{class:"ContentItem__titleText",onClick:f=>M(h.patent_id)},V(h.title),9,je),e("div",null,[t(_,{class:"author-icon"},{default:c(()=>[t(w)]),_:1}),e("span",{onClick:U},[e("span",Ke,V(h.inventor)+"   ",1)])]),e("div",Ge,[e("span",null,"申请时间："+V(h.filing_date),1)]),e("div",Qe,[e("span",null,"摘要："+V(h.snippet),1)]),e("div",null,[t(v,{onClick:f=>k.downLoadPdf(h.pdf)},{default:c(()=>[I("查看PDF")]),_:2},1032,["onClick"])])])]),_:2},1024),t(p,{class:"item-divider"})]))),256)),b.value==0?(l(),s("div",Je,[t(d,{description:"无结果"})])):g("",!0),b.value!=0?(l(),s("div",We,[t(A,{background:"",layout:"prev, pager, next",total:1e3,"current-page":P.value,"onUpdate:currentPage":C[0]||(C[0]=h=>P.value=h),onCurrentChange:R},null,8,["current-page"])])):g("",!0)],64)}}};const Ze={class:"body"},et=e("div",{class:"AppSearchAggregation__label"},"分类浏览",-1),tt={class:"demo-collapse"},lt={class:"AggregationListItem"},at={class:"AggregationListItemKey"},ot={class:"AggregationListItem"},nt={class:"AggregationListItemKey"},st={class:"AggregationListItem"},ct={class:"AggregationListItemKey"},it={class:"card"},dt={class:"AppSearchTabs"},ut={key:0,class:"base-switch__button"},rt=e("span",{class:"base-switch__label"},"可获取全文",-1),_t={key:1,class:"base-switch__button"},pt={key:0,class:"base-switch__label"},ht={key:1,class:"base-switch__label"},mt=e("div",{class:"AppSearchTabContent"},[e("div",{class:"AppSearchFilters"},[e("div",{class:"AppFilterMeta"}),e("div",{class:"AppFilterInput"}),e("div",{class:"AppFilterSelect"})])],-1),vt={class:"AppSearchRefineItems"},ft=e("div",{class:"AppSearchRefineLabel"},"筛选条件",-1),bt={class:"AppSearchRefineItem"},kt={key:0},yt={class:"AppSearchRefineItemText"},gt={class:"Highlight"},xt=e("div",{class:"List"},null,-1),Ct={key:0},Vt={key:1},Kt={__name:"SearchDetail",setup(Z){const x=W();Q(),J(),B({});const o=r(null),F=r(null),N=r(["1","2","3","4"]),u=r(1);r(),r(),r("");const P=r(!0),b=r(),S=r(),M=r(),U=r(),R=r(),k=r(),C=r(),m=r(["nihao","nihaoma"]),w=[{value:"display_name",label:"名称排序(升序)"},{value:"display_name:desc",label:"名称排序(降序)"},{value:"relevance_score:desc",label:"综合排序"},{value:"publication_date",label:"发布时间(升序)"},{value:"publication_date:desc",label:"发布时间(降序)"},{value:"cited_by_count",label:"引用次数(升序)"},{value:"cited_by_count:desc",label:"引用次数(降序)"}],_=[{value:"new",label:"从新到旧"},{value:"old",label:"从旧到新"}],v=B({item1:[{label:"article",checkbox:!1},{label:"book-chapter",checkbox:!1},{label:"book",checkbox:!1},{label:"dissertation",checkbox:!1},{label:"dataset",checkbox:!1},{label:"report",checkbox:!1},{label:"letter",checkbox:!1},{label:"standard",checkbox:!1},{label:"editorial",checkbox:!1},{label:"paratext",checkbox:!1},{label:"other",checkbox:!1}],item3:[{label:"2023",checkbox:!1},{label:"2022",checkbox:!1},{label:"2021",checkbox:!1},{label:"2020",checkbox:!1}],item4:[{label:"US",checkbox:!1,name:"美国"},{label:"WO",checkbox:!1,name:"世界知识产权组织"},{label:"CN",checkbox:!1,name:"中国"},{label:"JP",checkbox:!1,name:"日本"},{label:"DE",checkbox:!1,name:"德国"},{label:"FR",checkbox:!1,name:"法国"},{label:"GB",checkbox:!1,name:"英国"},{label:"CA",checkbox:!1,name:"加拿大"},{label:"AU",checkbox:!1,name:"澳大利亚"},{label:"IN",checkbox:!1,name:"印度"}],item7:[{label:"YES",checkbox:!1,name:"yes"},{label:"NO",checkbox:!1,name:"no"}]});B({data:{keys:[],values:[]}});const $=()=>{u.value===1?(d(),x.hasFullTextValue=P,x.dateValue=b,x.typeValue=S,x.sortFunc=U,o.value.getSearchData()):(A(),x.dateValue=b,x.countryValue=M,x.sortByTime=R,x.patentStatus=k,x.patentTypeRatio=C,F.value.getSearchData())},p=f=>{u.value=f},d=()=>{let f="";for(let i of v.item1)i.checkbox&&(f+=i.label,f+="|");S.value=f},A=()=>{let f="";for(let i of v.item4)i.checkbox&&(f+=i.label,f+=",");M.value=f},h=f=>{m.value.splice(f,1)};function O(){window.scrollTo({top:0,behavior:"smooth"})}return X(()=>x.filterItems,(f,i)=>{m.value=f,console.log(f)},{immediate:!0,deep:!0}),(f,i)=>{const y=n("el-collapse-item"),j=n("el-radio"),T=n("el-radio-group"),Y=n("el-collapse"),z=n("el-aside"),K=n("el-button"),q=n("el-col"),ce=n("el-date-picker"),ee=n("el-option"),te=n("el-select"),le=n("el-switch"),ie=n("el-row"),de=n("Close"),ue=n("el-icon"),re=n("el-main"),_e=n("el-container");return l(),s("div",Ze,[t(_e,{class:"ContentLayout"},{default:c(()=>[t(z,{width:"150px",class:"AppSearchAggregation ContentLayout__sideColumn"},{default:c(()=>[et,e("div",tt,[t(Y,{modelValue:N.value,"onUpdate:modelValue":i[1]||(i[1]=a=>N.value=a)},{default:c(()=>[u.value==1?(l(),E(y,{key:0,title:"论文类型",name:"1"},{default:c(()=>[e("div",null,[(l(!0),s(L,null,D(v.item1,(a,G)=>(l(),s("div",lt,[e("span",at,[t(ae(ne),{modelValue:a.checkbox,"onUpdate:modelValue":H=>a.checkbox=H,label:"",size:"",class:"checkbox"},null,8,["modelValue","onUpdate:modelValue"]),I(" "+V(a.label),1)])]))),256))])]),_:1})):g("",!0),u.value==2?(l(),E(y,{key:1,title:"国家",name:"4"},{default:c(()=>[e("div",null,[(l(!0),s(L,null,D(v.item4,(a,G)=>(l(),s("div",ot,[e("span",nt,[t(ae(ne),{modelValue:a.checkbox,"onUpdate:modelValue":H=>a.checkbox=H,label:"",size:"",class:"checkbox"},null,8,["modelValue","onUpdate:modelValue"]),I(" "+V(a.name),1)])]))),256))])]),_:1})):g("",!0),u.value==2?(l(),E(y,{key:2,title:"专利类型",name:"5"},{default:c(()=>[e("div",null,[e("div",st,[e("span",ct,[t(T,{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=a=>C.value=a),class:"ml-4"},{default:c(()=>[t(j,{label:"PATENT",size:"large"},{default:c(()=>[I("专利")]),_:1}),t(j,{label:"DESIGN",size:"large"},{default:c(()=>[I("设计")]),_:1})]),_:1},8,["modelValue"])])])])]),_:1})):g("",!0)]),_:1},8,["modelValue"])])]),_:1}),t(re,null,{default:c(()=>[e("div",it,[e("div",dt,[e("div",{class:oe(["AppSearchTab",{"is-active":u.value===1}]),onClick:i[2]||(i[2]=a=>p(1))},"论文",2),e("div",{class:oe(["AppSearchTab",{"is-active":u.value===2}]),onClick:i[3]||(i[3]=a=>p(2))},"专利",2)]),t(ie,{class:"AppSearchFilter"},{default:c(()=>[t(q,{span:2},{default:c(()=>[t(K,{onClick:$},{default:c(()=>[I("搜索")]),_:1})]),_:1}),t(q,{span:12},{default:c(()=>[t(ce,{modelValue:b.value,"onUpdate:modelValue":i[4]||(i[4]=a=>b.value=a),type:"daterange","start-placeholder":"Start date","end-placeholder":"End date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(q,{span:4},{default:c(()=>[u.value==1?(l(),E(te,{key:0,modelValue:U.value,"onUpdate:modelValue":i[5]||(i[5]=a=>U.value=a),placeholder:"排序方式",size:"default"},{default:c(()=>[(l(),s(L,null,D(w,a=>t(ee,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):g("",!0),u.value==2?(l(),E(te,{key:1,modelValue:R.value,"onUpdate:modelValue":i[6]||(i[6]=a=>R.value=a),placeholder:"时间排序",size:"default"},{default:c(()=>[(l(),s(L,null,D(_,a=>t(ee,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):g("",!0)]),_:1}),t(q,{span:4},{default:c(()=>[u.value==1?(l(),s("span",ut,[t(le,{modelValue:P.value,"onUpdate:modelValue":i[7]||(i[7]=a=>P.value=a)},null,8,["modelValue"]),rt])):g("",!0),u.value==2?(l(),s("span",_t,[t(le,{modelValue:k.value,"onUpdate:modelValue":i[8]||(i[8]=a=>k.value=a)},null,8,["modelValue"]),k.value?(l(),s("span",pt,"已授予")):g("",!0),k.value?g("",!0):(l(),s("span",ht,"申请中"))])):g("",!0)]),_:1})]),_:1}),mt,e("div",vt,[ft,e("span",bt,[m.value.length===0?(l(),s("span",kt,"空")):g("",!0),(l(!0),s(L,null,D(m.value,(a,G)=>(l(),s("span",yt,[e("span",gt,V(a.label)+":",1),I(" "+V(a.content)+" ",1),t(ue,{class:"delete",onClick:H=>h(G)},{default:c(()=>[t(de)]),_:2},1032,["onClick"])]))),256))])]),xt,u.value==1?(l(),s("div",Ct,[t(ze,{ref_key:"SearchCardRef",ref:o},null,512)])):g("",!0),u.value==2?(l(),s("div",Vt,[t(Xe,{ref_key:"PantentCardRef",ref:F},null,512)])):g("",!0)])]),_:1}),t(z,{width:"40px"},{default:c(()=>[t(K,{onClick:O,class:"scroll-top-button"},{default:c(()=>[I(" 回到顶部 ")]),_:1})]),_:1})]),_:1})])}}};export{Kt as default};
